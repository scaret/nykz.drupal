
FILE(GLOB  TPLS "*.tpl")

SET(TPL_GENHEADER "${CMAKE_CURRENT_SOURCE_DIR}/genheader.sh")
set(TPLHS "")
FOREACH(TPL ${TPLS})
	GET_FILENAME_COMPONENT(TPLNAME ${TPL} NAME)
	ADD_CUSTOM_COMMAND(OUTPUT "${CMAKE_CURRENT_BINARY_DIR}/${TPLNAME}.h" COMMAND ${TPL_GENHEADER} ${TPL} DEPENDS ${TPL})
	SET(TPLHS ${TPLHS} "${CMAKE_CURRENT_BINARY_DIR}/${TPLNAME}.h")
ENDFOREACH(TPL)

ADD_CUSTOM_TARGET(tpl DEPENDS ${TPLHS})
INSTALL(FILES ${TPLS} DESTINATION tpl)
